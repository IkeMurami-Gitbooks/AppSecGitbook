# Куки или токены?

## Сессии

Сессии в куках — круто, удобно, но куки зло. Надо защищаться от CSRF, кука задается на весь домен, а не ориджин (кука может уйти на другой протокол или порт)

Куку можно обезопасить от XSS через HttpOnly. Новые веяния — SameSite — осложняют реализацию аутентификации на других сервисах&#x20;

Еще есть нюанс: ваша сессия может быть очищена браузером, если другой ресурс переполнит CookieJar.

## Токены

Тяжело защитить на стороне браузера (если рассматривать веб-клиент), но можно — через service workers. Токены не будут доступны из js контекста, только из sw и будут сохраняться при перезагрузке страницы. TODO: проверить: [https://blog.ropnop.com/storing-tokens-in-browser](https://blog.ropnop.com/storing-tokens-in-browser)
